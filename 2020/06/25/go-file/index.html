<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>go-file · 风兮木落</title><meta name="description" content="Golang 文件夹相关操作文件夹的创建创建一级文件夹  如果文件夹已经存在会返回错误
123456// 在所在盘的根目录创建文件夹,如果运行在F盘,则在F盘创建 F://oneLevelDirerr := os.Mkdir(&amp;quot;/oneLevelDir&amp;quot;,0666)// 在特定盘"><meta name="og:description" content="Golang 文件夹相关操作文件夹的创建创建一级文件夹  如果文件夹已经存在会返回错误
123456// 在所在盘的根目录创建文件夹,如果运行在F盘,则在F盘创建 F://oneLevelDirerr := os.Mkdir(&amp;quot;/oneLevelDir&amp;quot;,0666)// 在特定盘"><meta name="twitter:site" content="风兮木落"><meta name="twitter:title" content="go-file"><meta name="twitter:card" content="summary"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.3.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div class="container" id="stage"><div class="row"><div class="col-sm-3 col-xs-12 side-container invisible" id="side-bar"><div class="vertical-text site-title"><h3 class="site-title-small" tabindex="-1"><a class="a-title" href="/">long blogs</a></h3><h1 class="site-title-large" tabindex="-1"><a class="a-title" href="/">进一步有进一步惊喜</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div class="site-title-links" id="site-nav"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/tags">Tags</a></li><li class="soc"><a href="https://long95288.github.io/atom.xml" target="_blank" rel="noopener noreferrer" aria-label="RSS"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2025&nbsp;<a target="_blank" href="https://long95288.github.io" rel="noopener noreferrer">long</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div class="col-sm-9 col-xs-12 main-container invisible" id="main-container"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>go-file</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2020-06-25</span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a class="a-tag" href="/tags/golang/" title="golang">golang</a><span>&nbsp;</span></span></p><p class="post-abstract"><h3 id="Golang-文件夹相关操作"><a href="#Golang-文件夹相关操作" class="headerlink" title="Golang 文件夹相关操作"></a>Golang 文件夹相关操作</h3><h4 id="文件夹的创建"><a href="#文件夹的创建" class="headerlink" title="文件夹的创建"></a>文件夹的创建</h4><h5 id="创建一级文件夹"><a href="#创建一级文件夹" class="headerlink" title="创建一级文件夹"></a>创建一级文件夹</h5><p>  如果文件夹已经存在会返回错误</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在所在盘的根目录创建文件夹,如果运行在F盘,则在F盘创建 F://oneLevelDir</span></span><br><span class="line">err := os.Mkdir(<span class="string">&quot;/oneLevelDir&quot;</span>,<span class="number">0666</span>)</span><br><span class="line"><span class="comment">// 在特定盘符创建文件夹</span></span><br><span class="line">err = os.Mkdir(<span class="string">&quot;D://oneLevelDir&quot;</span>,<span class="number">0666</span>)</span><br><span class="line"><span class="comment">// 在当前目录下创建文件夹</span></span><br><span class="line">err = os.Mkdir(<span class="string">&quot;oneLevelDir&quot;</span>,<span class="number">0666</span>)</span><br></pre></td></tr></table></figure>
<h5 id="创建多级文件夹"><a href="#创建多级文件夹" class="headerlink" title="创建多级文件夹"></a>创建多级文件夹</h5><p>想要在不同的位置创建文件夹,和创建一级文件夹一致。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := os.MkdirAll(<span class="string">&quot;multiDir1/second/third&quot;</span>,<span class="number">0666</span>)</span><br></pre></td></tr></table></figure>
<h4 id="文件-夹-重命名"><a href="#文件-夹-重命名" class="headerlink" title="文件(夹)重命名"></a>文件(夹)重命名</h4><h5 id="文件夹重命名"><a href="#文件夹重命名" class="headerlink" title="文件夹重命名"></a>文件夹重命名</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := os.Rename(<span class="string">&quot;oneLevelDir&quot;</span>,<span class="string">&quot;oneLevelDir2&quot;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="文件重命名"><a href="#文件重命名" class="headerlink" title="文件重命名"></a>文件重命名</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := os.Rename(<span class="string">&quot;test.txt&quot;</span>,<span class="string">&quot;test2.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="移动文件-夹"><a href="#移动文件-夹" class="headerlink" title="移动文件(夹)"></a>移动文件(夹)</h4><p>  可以用Rename完成文件移动操作,将test2.txt移到oneLevelDir2中</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := os.Rename(<span class="string">&quot;test2.txt&quot;</span>,<span class="string">&quot;oneLevelDir2/test2.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 源文件</span></span><br><span class="line">srcFile,err := os.Open(<span class="string">&quot;oneLevelDir2/test2.txt&quot;</span>)</span><br><span class="line"><span class="keyword">defer</span> srcFile.Close()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 目标文件</span></span><br><span class="line">desFile,err := os.OpenFile(<span class="string">&quot;test2.txt&quot;</span>,os.O_CREATE|os.O_TRUNC|os.O_RDWR,<span class="number">0666</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">n,err := io.Copy(desFile,srcFile)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br></pre></td></tr></table></figure>
<p>复制文件夹可以先创建文件夹，然后再遍历复制文件便可。</p>
<h4 id="查询文件夹"><a href="#查询文件夹" class="headerlink" title="查询文件夹"></a>查询文件夹</h4><h5 id="方法一使用file-Readdir-n-获得信息"><a href="#方法一使用file-Readdir-n-获得信息" class="headerlink" title="方法一使用file.Readdir(n)获得信息"></a>方法一使用file.Readdir(n)获得信息</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当前文件夹</span></span><br><span class="line">file,err := os.Open(<span class="string">&quot;./&quot;</span>)</span><br><span class="line"><span class="comment">// 获得当前文件夹下文件列表</span></span><br><span class="line"><span class="keyword">var</span> n <span class="type">int</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">// n &lt;=0获得全部文件,n&gt;0获得相应个数的文件</span></span><br><span class="line">fileList,err := file.Readdir(n)</span><br><span class="line"><span class="comment">// 输出文件夹信息</span></span><br><span class="line"><span class="keyword">for</span> _,f := <span class="keyword">range</span> fileList &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%v\t\t%v\t\t%v\t\t%v\t\t%v\n&quot;</span>,f.Name(),f.IsDir(),f.Size(),f.Mode(),f.ModTime())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="只获得文件夹名"><a href="#只获得文件夹名" class="headerlink" title="只获得文件夹名"></a>只获得文件夹名</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileNameList,err := file.Readdirnames(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<p>返回文件名字符串数组</p>
<h4 id="删除文件-夹"><a href="#删除文件-夹" class="headerlink" title="删除文件(夹)"></a>删除文件(夹)</h4><h5 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err :=os.Remove(<span class="string">&quot;test2.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
<h5 id="删除文件夹"><a href="#删除文件夹" class="headerlink" title="删除文件夹"></a>删除文件夹</h5><p>删除文件夹及文件夹下所有数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err = os.RemoveAll(<span class="string">&quot;oneLevelDir2&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Golang-文件相关操作"><a href="#Golang-文件相关操作" class="headerlink" title="Golang 文件相关操作"></a>Golang 文件相关操作</h3><h4 id="新建文件"><a href="#新建文件" class="headerlink" title="新建文件"></a>新建文件</h4><p>使用<code>OpenFile</code>中<code>os.OCREATE</code>选项可以创建文件</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_,err := os.OpenFile(<span class="string">&quot;test2.txt&quot;</span>,os.O_CREATE,<span class="number">0666</span>)</span><br></pre></td></tr></table></figure>
<h4 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h4><h5 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h5><p>可以读取出全部的数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">file,err := os.Open(<span class="string">&quot;test2.txt&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">data := <span class="built_in">make</span>([]<span class="type">byte</span>,<span class="number">0</span>)</span><br><span class="line">buffer := <span class="built_in">make</span>([]<span class="type">byte</span>,<span class="number">1024</span>)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">    n,err := file.Read(buffer)</span><br><span class="line">    <span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">        <span class="comment">// 读取完成</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 循环赋值</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>;i&lt;n;i++&#123;</span><br><span class="line">        data = <span class="built_in">append</span>(data,buffer[i])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>,<span class="type">string</span>(data))</span><br></pre></td></tr></table></figure>
<h5 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h5><p>使用<code>bufio</code>带缓冲读取</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">file,err := os.Open(<span class="string">&quot;test2.txt&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 带缓冲的</span></span><br><span class="line">r:= bufio.NewReader(file)</span><br><span class="line">sb := strings.Builder&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> <span class="literal">true</span> &#123;</span><br><span class="line">    tmp,err := r.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">        <span class="comment">// 如果最后一行数据没有\n符也要加进去</span></span><br><span class="line">        sb.WriteString(tmp)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    sb.WriteString(tmp)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>,sb.String())</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong> 当出现EOF错误时只是说明读取的行没有’\n’结尾,通常是文件末尾,但是还有一种情况是最后一行末尾没有换行符。这一行的数据也要存进去。</p>
<h5 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h5><p>使用ioutil工具包</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data,err := ioutil.ReadFile(<span class="string">&quot;test2.txt&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmt.Println(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>,<span class="type">string</span>(data))</span><br></pre></td></tr></table></figure>
<p>ReadFile()实现是使用os.Open()函数加上bytes.Buffer.ReadFrom()函数完成</p>
<h4 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h4><h5 id="方法一-1"><a href="#方法一-1" class="headerlink" title="方法一"></a>方法一</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">file,err := os.OpenFile(<span class="string">&quot;test3.txt&quot;</span>,os.O_RDWR|os.O_CREATE|os.O_TRUNC,<span class="number">0666</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> file.Close()</span><br><span class="line"><span class="comment">// n,err := file.Write([]byte(&quot;Welcome&quot;))</span></span><br><span class="line">n,err := file.WriteString(<span class="string">&quot;Hello World \r\n&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line"><span class="comment">// 偏移插入,覆盖写入</span></span><br><span class="line">_,err = file.WriteAt([]<span class="type">byte</span>(<span class="string">&quot;Append&quot;</span>),<span class="number">6</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="方法二-1"><a href="#方法二-1" class="headerlink" title="方法二"></a>方法二</h5><p>带缓冲的写入</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> file,err := os.OpenFile(<span class="string">&quot;test3.txt&quot;</span>,os.O_RDWR|os.O_CREATE|os.O_TRUNC,<span class="number">0666</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> file.Close()</span><br><span class="line">r := bufio.NewWriter(file)</span><br><span class="line">r.WriteString(<span class="string">&quot;Hello,World&quot;</span>)</span><br><span class="line">r.Flush()</span><br></pre></td></tr></table></figure>
<h5 id="方法三-1"><a href="#方法三-1" class="headerlink" title="方法三"></a>方法三</h5><p><code>ioutil.WriteFile</code>写入</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">err := ioutil.WriteFile(<span class="string">&quot;test3.txt&quot;</span>,[]<span class="type">byte</span>(<span class="string">&quot;Hello,World3&quot;</span>),<span class="number">0666</span>)</span><br></pre></td></tr></table></figure>
<p>实现方法是OpenFile()写入.golang官方实现如下,和方法一类似，但是更好。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WriteFile</span><span class="params">(filename <span class="type">string</span>, data []<span class="type">byte</span>, perm os.FileMode)</span></span> <span class="type">error</span> &#123;</span><br><span class="line">  f, err := os.OpenFile(filename, os.O_WRONLY|os.O_CREATE|os.O_TRUNC, perm)</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  n, err := f.Write(data)</span><br><span class="line">  <span class="keyword">if</span> err == <span class="literal">nil</span> &amp;&amp; n &lt; <span class="built_in">len</span>(data) &#123;</span><br><span class="line">    err = io.ErrShortWrite</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> err1 := f.Close(); err == <span class="literal">nil</span> &#123;</span><br><span class="line">    err = err1</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>File默认实现了io.Writer和io.Reader的接口。所以bufio可以直接传file过去。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">  Read(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Writer <span class="keyword">interface</span> &#123;</span><br><span class="line">  Write(p []<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="其它小技巧"><a href="#其它小技巧" class="headerlink" title="其它小技巧"></a>其它小技巧</h4><h5 id="string转Reader"><a href="#string转Reader" class="headerlink" title="string转Reader"></a>string转Reader</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w := strings.NewReader(<span class="string">&quot;Hello World&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>用途,当需要流转换的时候。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 转换成Reader对象</span></span><br><span class="line">r1 := strings.NewReader(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line"><span class="comment">// 使用bufio读出数据</span></span><br><span class="line">br := bufio.NewReader(r1)</span><br><span class="line">data := <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">for</span> <span class="literal">true</span> &#123;</span><br><span class="line">  s,err := br.ReadString(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">      data += s</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">  data += s</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>,data)</span><br></pre></td></tr></table></figure>
</p></div><div class="share"><span>Share</span>&nbsp;<span class="soc"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></span><span class="soc"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></span><span class="soc"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=https://long95288.github.io/2020/06/25/go-file/%20风兮木落%20go-file"></a></span></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/2020/07/23/go-reflect/" title="go-reflect"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: go-reflect</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/2020/06/24/go-rpc/" title="go-rpc">Next post: go-rpc&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2025&nbsp;<a target="_blank" href="https://long95288.github.io" rel="noopener noreferrer">long</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>